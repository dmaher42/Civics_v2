<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Vibe vs. The Text: Australia's Constitution</title>
  <meta name="description" content="Class activity pack + game: explore the 'vibe' people expect from a constitution vs the actual text of Australia's Constitution." />

  <!-- Fonts & Tailwind (no build step required) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind design tokens (tweak these to match your brand)
    tailwind.config = {
      darkMode: 'class',
      theme: {
        container: { center: true, padding: '1rem' },
        extend: {
          fontFamily: { sans: ['Inter', 'system-ui', 'Segoe UI', 'Roboto', 'sans-serif'] },
          colors: {
            brand: {
              50:  '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd',
              400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8',
              800: '#1e40af', 900: '#1e3a8a'
            }
          },
          boxShadow: { soft: '0 10px 30px rgba(2, 6, 23, 0.08)' }
        }
      }
    }
  </script>
  <style>
    /* Small polish */
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .lift { transition: transform .18s ease, box-shadow .18s ease; }
    .lift:hover { transform: translateY(-4px); box-shadow: 0 24px 40px rgba(2,6,23,.12); }
    @media (prefers-reduced-motion: reduce) { .lift { transition: none; } }
    .activity-card{background:linear-gradient(135deg,rgba(219,234,254,.55),rgba(248,250,252,.92));border-radius:1rem;padding:1.5rem;margin-bottom:1.25rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);border:1px solid rgba(226,232,240,.9);backdrop-filter:blur(6px)}
    #game{background:linear-gradient(135deg,rgba(255,255,255,.88),rgba(219,234,254,.7));border:1px solid rgba(191,219,254,.8);backdrop-filter:blur(8px);box-shadow:0 20px 40px rgba(15,23,42,.08)}
    .dark #game{background:rgba(15,23,42,.7);border-color:rgba(148,163,184,.45);box-shadow:none}
    .dark .activity-card{background-color:rgba(2,6,23,.7);border-color:#1f2937}
    .writing-panel{display:flex;flex-direction:column;gap:.75rem;background:rgba(255,255,255,.92);border-radius:1rem;border:1px solid rgba(148,163,184,.4);padding:1.25rem;box-shadow:0 14px 30px rgba(15,23,42,.08)}
    .dark .writing-panel{background:rgba(15,23,42,.72);border-color:rgba(148,163,184,.35);box-shadow:none}
    .writing-panel--accent{background:linear-gradient(135deg,rgba(196,181,253,.25),rgba(219,234,254,.24));border-color:rgba(168,85,247,.45)}
    .dark .writing-panel--accent{background:rgba(76,29,149,.45);border-color:rgba(168,85,247,.55)}
    .writing-panel--no-storage{border-color:rgba(249,115,22,.55)}
    .writing-panel__header{display:flex;flex-direction:column;gap:.5rem}
    .writing-panel__title{font-weight:700;font-size:1.05rem;letter-spacing:-.01em}
    .writing-panel__prompt{font-size:.92rem;line-height:1.5;color:#475569}
    .dark .writing-panel__prompt{color:rgba(226,232,240,.82)}
    .writing-panel textarea{width:100%;min-height:150px;resize:vertical;border:1px solid rgba(148,163,184,.6);border-radius:.85rem;padding:.85rem 1rem;font:inherit;background-color:rgba(248,250,252,.94);transition:border-color .18s ease,box-shadow .18s ease,background-color .18s ease}
    .writing-panel textarea:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,.15);background-color:#fff}
    .writing-panel textarea::placeholder{color:rgba(100,116,139,.8)}
    .dark .writing-panel textarea{background-color:rgba(15,23,42,.65);border-color:rgba(148,163,184,.45);color:inherit}
    .dark .writing-panel textarea:focus{border-color:rgba(96,165,250,.8);box-shadow:0 0 0 3px rgba(96,165,250,.18);background-color:rgba(15,23,42,.85)}
    .writing-panel__footer{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:.75rem;font-size:.875rem;color:#475569}
    .dark .writing-panel__footer{color:rgba(226,232,240,.78)}
    .writing-panel__status{display:flex;align-items:center;gap:.4rem;color:inherit}
    .writing-panel__status[data-state="success"]{color:#15803d}
    .writing-panel__status[data-state="info"]{color:#0369a1}
    .writing-panel__status[data-state="error"]{color:#b91c1c}
    .writing-panel__status[data-state="saving"]{color:#2563eb}
    .writing-panel__status[data-state="muted"]{color:#475569}
    .dark .writing-panel__status[data-state="muted"]{color:rgba(226,232,240,.78)}
    .dark .writing-panel__status[data-state="success"]{color:#4ade80}
    .dark .writing-panel__status[data-state="info"]{color:#38bdf8}
    .dark .writing-panel__status[data-state="error"]{color:#f87171}
    .dark .writing-panel__status[data-state="saving"]{color:#93c5fd}
    .writing-panel__actions{display:flex;align-items:center;gap:1rem}
    .writing-panel__count{font-variant-numeric:tabular-nums;font-weight:600}
    .writing-panel__reset{border:1px solid rgba(148,163,184,.6);border-radius:9999px;padding:.35rem .85rem;font-size:.85rem;font-weight:600;color:#2563eb;background:rgba(255,255,255,.94);transition:transform .15s ease,box-shadow .15s ease,background-color .15s ease}
    .writing-panel__reset:hover{background-color:rgba(219,234,254,1);box-shadow:0 6px 12px rgba(37,99,235,.18);transform:translateY(-1px)}
    .writing-panel__reset:focus-visible{outline:2px solid rgba(37,99,235,.5);outline-offset:2px}
    .dark .writing-panel__reset{background:rgba(15,23,42,.62);border-color:rgba(148,163,184,.5);color:#93c5fd}
    .dark .writing-panel__reset:hover{background:rgba(37,99,235,.22)}
  </style>
</head>
<body class="bg-gray-50 text-slate-800 antialiased dark:bg-slate-950 dark:text-slate-100">
  <!-- Skip link -->
  <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 bg-brand-600 text-white px-3 py-2 rounded-lg">Skip to content</a>

  <!-- Top ribbon (optional) -->
  <div class="bg-gradient-to-r from-brand-600 to-brand-400 text-white text-sm">
    <div class="container py-2 text-center">New classroom-ready version with a game! <a class="underline font-semibold" href="#activity-4">Jump to Game</a></div>
  </div>

  <!-- Header / Nav -->
  <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 border-b border-slate-200/60 dark:border-slate-800">
    <div class="container flex h-16 items-center justify-between">
      <a href="#" class="flex items-center gap-3">
        <div class="h-8 w-8 rounded-xl bg-brand-600"></div>
        <span class="font-extrabold tracking-tight">Civics Toolkit</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#activity-1" class="hover:text-brand-600">Big Paper</a>
        <a href="#activity-2" class="hover:text-brand-600">Real Deal</a>
        <a href="#activity-3" class="hover:text-brand-600">Showdown</a>
        <a href="#activity-4" class="hover:text-brand-600">Game</a>
        <a href="#resources" class="hover:text-brand-600">Resources</a>
      </nav>
      <div class="flex items-center gap-2">
        <button id="themeToggle" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" aria-label="Toggle dark mode">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5"><path d="M21.75 15.002A9.72 9.72 0 0 1 12.004 22C6.487 22 2 17.513 2 11.996 2 7.45 4.94 3.61 9.06 2.248a.75.75 0 0 1 .935.966 8.25 8.25 0 0 0 10.73 10.73.75.75 0 0 1 1.027.958Z"/></svg>
        </button>
        <button id="menuBtn" class="md:hidden p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" aria-label="Open menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6"><path d="M3.75 5.25h16.5v1.5H3.75zM3.75 11.25h16.5v1.5H3.75zM3.75 17.25h16.5v1.5H3.75z"/></svg>
        </button>
      </div>
    </div>
    <!-- Mobile menu -->
    <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200/60 dark:border-slate-800">
      <div class="container py-3 grid gap-3">
        <a href="#activity-1" class="py-2">Big Paper</a>
        <a href="#activity-2" class="py-2">Real Deal</a>
        <a href="#activity-3" class="py-2">Showdown</a>
        <a href="#activity-4" class="py-2">Game</a>
        <a href="#resources" class="py-2">Resources</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 bg-gradient-to-b from-white via-brand-50 to-white dark:from-slate-950 dark:via-slate-900 dark:to-slate-950"></div>
    <div class="container grid md:grid-cols-2 gap-10 py-14 md:py-20 items-center">
      <div>
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight leading-[1.05]">üèõÔ∏è The Vibe vs. The Text</h1>
        <p class="mt-4 text-lg text-slate-600 dark:text-slate-300">Exploring Australia's Constitution: compare what people expect a constitution to be with what the 1901 document actually says.</p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#activity-1" class="inline-flex items-center rounded-xl bg-brand-600 px-5 py-3 text-white font-semibold shadow-soft hover:opacity-90">Start Activity</a>
          <a href="#resources" class="inline-flex items-center rounded-xl border border-slate-300 dark:border-slate-700 px-5 py-3 font-semibold hover:bg-slate-50 dark:hover:bg-slate-800">Teacher Resources</a>
          <a href="#activity-4" class="inline-flex items-center rounded-xl bg-purple-600 px-5 py-3 text-white font-semibold shadow-soft hover:opacity-90">Play Game</a>
        </div>
      </div>
      <div>
        <div class="relative">
          <div class="absolute -inset-4 -z-10 rounded-3xl bg-gradient-to-tr from-brand-200 to-brand-500 blur-3xl opacity-30"></div>
          <div class="rounded-3xl border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-slate-900/60 p-2 shadow-soft backdrop-blur">
            <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop" alt="Students collaborating on civics activity" class="rounded-2xl"/>
          </div>
        </div>
      </div>
    </div>
  </section>

  <main id="main" class="container px-4 md:px-0">
    <!-- Intro -->
    <section aria-labelledby="intro-title" class="max-w-3xl mx-auto mb-12">
      <div class="bg-white/90 dark:bg-slate-900/70 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-slate-800">
        <h2 id="intro-title" class="text-2xl font-extrabold mb-4 text-center">What's the "Vibe" of the Constitution?</h2>
        <p class="mb-4 text-slate-700 dark:text-slate-300">We often have a feeling about what a nation's most important document should do‚Äîfairness, rights, big principles. Watch this classic moment from <em>The Castle</em>.</p>
        <!-- YouTube (privacy-enhanced) -->
        <div class="relative w-full rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800">
          <div class="pt-[56.25%]"></div>
          <iframe class="absolute inset-0 w-full h-full" src="https://www.youtube-nocookie.com/embed/97IiPli_uXw" title="The Castle clip" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy" referrerpolicy="strict-origin-when-cross-origin"></iframe>
        </div>
        <p class="mt-4 text-slate-700 dark:text-slate-300">Then compare that vibe to the actual text of Australia's Constitution (1901). Let's investigate.</p>
      </div>
    </section>

    <!-- Activity 1 -->
    <section id="activity-1" class="activity-card">
      <div class="flex items-start">
        <div class="mr-4 shrink-0">
          <div class="h-10 w-10 rounded-xl grid place-items-center bg-brand-100 text-brand-700 font-bold">1</div>
        </div>
        <div>
          <h2 class="text-2xl font-extrabold mb-3">The "Big Paper" Brainstorm ü§î</h2>
          <p class="mb-4 text-lg">Start with the big question: <strong>What should be in a constitution?</strong></p>
          <p class="mb-4 bg-brand-50 border-l-4 border-brand-400 p-4 rounded-r-lg text-slate-700 dark:text-slate-300">Think of it as a country's rule book. It sets the highest rules for how government acts and how people are treated.</p>
          <h3 class="font-semibold mb-2">Instructions</h3>
          <ol class="list-decimal list-inside space-y-2 mb-4 text-slate-700 dark:text-slate-300">
            <li>Use the whiteboard below to silently brainstorm your ideas.</li>
            <li>Add digital sticky notes: key rules for fairness? limits on government? protected rights?</li>
            <li>Read classmates' ideas and connect them with lines or comments.</li>
            <li><span class="font-semibold">No talking</span>‚Äîall discussion happens on the Big Paper.</li>
          </ol>
          <!-- Miro embed -->
          <div class="relative w-full rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800 h-[600px] bg-white/30 dark:bg-slate-900/30">
            <iframe class="absolute inset-0 w-full h-full" src="https://miro.com/app/live-embed/uXjVJFUyLhE=/?embedMode=view_only_without_ui&embedId=734789977828" title="Miro Big Paper" frameborder="0" allow="fullscreen; clipboard-read; clipboard-write" loading="lazy" referrerpolicy="strict-origin-when-cross-origin"></iframe>
          </div>
        </div>
      </div>
    </section>

    <!-- Activity 2 -->
    <section id="activity-2" class="activity-card">
      <div class="flex items-start">
        <div class="mr-4 shrink-0">
          <div class="h-10 w-10 rounded-xl grid place-items-center bg-brand-100 text-brand-700 font-bold">2</div>
        </div>
        <div>
          <h2 class="text-2xl font-extrabold mb-3">Unpacking the Real Deal üé¨</h2>
          <p class="mb-4">Watch the Parliamentary Education Office video, then identify five key concepts.</p>
          <div class="relative w-full rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800 mb-6 bg-black">
            <video controls class="block w-full h-auto" preload="metadata">
              <source src="https://aphref.aph.gov.au/senate/Video/PEO/PEO-The-Constitution.mp4#t=0.1" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>
          <h3 class="text-xl font-extrabold mb-3">Five‚ÄëFinger Summaries üñêÔ∏è</h3>
          <p class="mb-4">Use the shared writing panels below to capture what each idea means in the Australian Constitution.</p>
          <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
            <article class="writing-panel" data-writing-panel data-storage-key="five-separation">
              <div class="writing-panel__header">
                <h4 id="separation-title" class="writing-panel__title">Separation of Powers</h4>
                <p id="prompt-separation" class="writing-panel__prompt">Summarise how the Constitution divides law-making, enforcing, and interpreting powers between Parliament, the Executive, and the High Court. Aim for 30‚Äì50 words.</p>
              </div>
              <label class="sr-only" for="summary-separation">Write a summary for Separation of Powers</label>
              <textarea id="summary-separation" data-writing-input rows="5" aria-labelledby="separation-title" aria-describedby="prompt-separation" placeholder="Which branch does what? Include one detail or example from the video."></textarea>
              <div class="writing-panel__footer">
                <p class="writing-panel__status" data-writing-status aria-live="polite">Autosave ready.</p>
                <div class="writing-panel__actions">
                  <span class="writing-panel__count" data-writing-count>0 words</span>
                  <button type="button" class="writing-panel__reset" data-writing-reset>Reset</button>
                </div>
              </div>
            </article>

            <article class="writing-panel" data-writing-panel data-storage-key="five-division">
              <div class="writing-panel__header">
                <h4 id="division-title" class="writing-panel__title">Division of Powers</h4>
                <p id="prompt-division" class="writing-panel__prompt">Explain how national and state governments split responsibilities. Name at least one Commonwealth power from the video. Aim for 30‚Äì50 words.</p>
              </div>
              <label class="sr-only" for="summary-division">Write a summary for Division of Powers</label>
              <textarea id="summary-division" data-writing-input rows="5" aria-labelledby="division-title" aria-describedby="prompt-division" placeholder="What does the Commonwealth control? What stays with the states?"></textarea>
              <div class="writing-panel__footer">
                <p class="writing-panel__status" data-writing-status aria-live="polite">Autosave ready.</p>
                <div class="writing-panel__actions">
                  <span class="writing-panel__count" data-writing-count>0 words</span>
                  <button type="button" class="writing-panel__reset" data-writing-reset>Reset</button>
                </div>
              </div>
            </article>

            <article class="writing-panel" data-writing-panel data-storage-key="five-rule">
              <div class="writing-panel__header">
                <h4 id="rule-title" class="writing-panel__title">The Rule of Law</h4>
                <p id="prompt-rule" class="writing-panel__prompt">Describe what the rule of law means in Australia's system and how the Constitution protects it. Aim for 30‚Äì50 words.</p>
              </div>
              <label class="sr-only" for="summary-rule">Write a summary for the Rule of Law</label>
              <textarea id="summary-rule" data-writing-input rows="5" aria-labelledby="rule-title" aria-describedby="prompt-rule" placeholder="Who must follow the law? Mention any safeguards or courts that enforce it."></textarea>
              <div class="writing-panel__footer">
                <p class="writing-panel__status" data-writing-status aria-live="polite">Autosave ready.</p>
                <div class="writing-panel__actions">
                  <span class="writing-panel__count" data-writing-count>0 words</span>
                  <button type="button" class="writing-panel__reset" data-writing-reset>Reset</button>
                </div>
              </div>
            </article>

            <article class="writing-panel" data-writing-panel data-storage-key="five-representative">
              <div class="writing-panel__header">
                <h4 id="representative-title" class="writing-panel__title">Representative &amp; Responsible Government</h4>
                <p id="prompt-representative" class="writing-panel__prompt">Outline how elections and accountability keep leaders answerable to the people. Include one example from the video. Aim for 30‚Äì50 words.</p>
              </div>
              <label class="sr-only" for="summary-representative">Write a summary for Representative and Responsible Government</label>
              <textarea id="summary-representative" data-writing-input rows="5" aria-labelledby="representative-title" aria-describedby="prompt-representative" placeholder="How are members chosen? How must the government answer to Parliament?"></textarea>
              <div class="writing-panel__footer">
                <p class="writing-panel__status" data-writing-status aria-live="polite">Autosave ready.</p>
                <div class="writing-panel__actions">
                  <span class="writing-panel__count" data-writing-count>0 words</span>
                  <button type="button" class="writing-panel__reset" data-writing-reset>Reset</button>
                </div>
              </div>
            </article>

            <article class="writing-panel md:col-span-2" data-writing-panel data-storage-key="five-rights">
              <div class="writing-panel__header">
                <h4 id="rights-title" class="writing-panel__title">Rights in the Constitution</h4>
                <p id="prompt-rights" class="writing-panel__prompt">Identify the specific rights named in the Constitution and note any limits or rights that are missing. Aim for 40‚Äì60 words.</p>
              </div>
              <label class="sr-only" for="summary-rights">Write a summary for Rights in the Constitution</label>
              <textarea id="summary-rights" data-writing-input rows="5" aria-labelledby="rights-title" aria-describedby="prompt-rights" placeholder="Which rights are explicit? Which did you expect but not find?"></textarea>
              <div class="writing-panel__footer">
                <p class="writing-panel__status" data-writing-status aria-live="polite">Autosave ready.</p>
                <div class="writing-panel__actions">
                  <span class="writing-panel__count" data-writing-count>0 words</span>
                  <button type="button" class="writing-panel__reset" data-writing-reset>Reset</button>
                </div>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>

    <!-- Activity 3 -->
    <section id="activity-3" class="activity-card">
      <div class="flex items-start">
        <div class="mr-4 shrink-0">
          <div class="h-10 w-10 rounded-xl grid place-items-center bg-brand-100 text-brand-700 font-bold">3</div>
        </div>
        <div>
          <h2 class="text-2xl font-extrabold mb-3">Vibe vs. Text Showdown ‚öñÔ∏è</h2>
          <p class="mb-4">Compare your Big Paper ideas with what you learned from the video.</p>
          <h3 class="font-semibold mb-2">Guiding Questions</h3>
          <ul class="list-disc list-inside space-y-2 text-slate-700 dark:text-slate-300">
            <li><strong>What's missing?</strong> Ideas from your class that are not in the video (e.g., bill of rights, PM mention, environment).</li>
            <li><strong>What's surprising?</strong> Anything unexpected‚Äîhow much is mechanics of government vs rights?</li>
            <li><strong>Why the gap?</strong> Consider the 1901 context and the goal of uniting six colonies.</li>
          </ul>
          <div class="mt-6">
            <article class="writing-panel writing-panel--accent" data-writing-panel data-storage-key="showdown-reflection">
              <div class="writing-panel__header">
                <h3 id="showdown-title" class="writing-panel__title">Showdown Reflection Paragraph</h3>
                <p id="prompt-showdown" class="writing-panel__prompt">Use the guiding questions to craft a concluding paragraph that compares the class "vibe" with the constitutional text. Aim for four to five sentences.</p>
                <ol id="showdown-steps" class="list-decimal list-inside space-y-1 text-sm text-slate-600 dark:text-slate-200">
                  <li>Start with a topic sentence that states the contrast.</li>
                  <li>Include one detail from your Big Paper ideas and one from the video.</li>
                  <li>Explain why the differences exist in the 1901 context.</li>
                  <li>Finish with what this teaches about constitutions today.</li>
                </ol>
              </div>
              <label class="sr-only" for="showdown-reflection">Write your concluding paragraph</label>
              <textarea id="showdown-reflection" data-writing-input rows="7" aria-labelledby="showdown-title" aria-describedby="prompt-showdown showdown-steps" placeholder="Although we expected the Constitution to‚Ä¶, the text actually‚Ä¶, because‚Ä¶. This shows‚Ä¶"></textarea>
              <div class="writing-panel__footer">
                <p class="writing-panel__status" data-writing-status aria-live="polite">Autosave ready.</p>
                <div class="writing-panel__actions">
                  <span class="writing-panel__count" data-writing-count>0 words</span>
                  <button type="button" class="writing-panel__reset" data-writing-reset>Reset</button>
                </div>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>

    <!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Vibe vs. The Text: Australia's Constitution</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body { font-family: 'Inter', sans-serif; }
      .activity-card{background:linear-gradient(135deg,rgba(219,234,254,.55),rgba(248,250,252,.92));border-radius:1rem;padding:1.5rem;margin-bottom:1.25rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);border:1px solid rgba(226,232,240,.9);backdrop-filter:blur(6px)}
      #game{background:linear-gradient(135deg,rgba(255,255,255,.88),rgba(219,234,254,.7));border:1px solid rgba(191,219,254,.8);backdrop-filter:blur(8px);box-shadow:0 20px 40px rgba(15,23,42,.08)}
      .dark #game{background:rgba(15,23,42,.7);border-color:rgba(148,163,184,.45);box-shadow:none}
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased">

  <div class="container mx-auto px-4 py-8 md:py-12">
    <header class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">üèõÔ∏è The Vibe vs. The Text</h1>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto">Exploring Australia's Constitution</p>
    </header>

    <!-- Existing activities 1, 2, 3 will stay as in your version -->
    
    <!-- Activity 4: Constitution Game -->
    <section id="activity-4" class="activity-card">
      <div class="flex items-start">
        <div class="mr-4 shrink-0">
          <div class="h-10 w-10 rounded-xl grid place-items-center bg-brand-100 text-brand-700 font-bold">4</div>
        </div>
        <div class="flex-1">
          <h2 class="text-2xl font-extrabold mb-3">Constitution Game üéÆ</h2>
          <p class="mb-4">Test your knowledge! Decide if each statement is part of the actual <strong>Text</strong> of the Constitution or just the <strong>Vibe</strong>.</p>
          <div id="game" class="max-w-xl mx-auto bg-white rounded-xl shadow p-6 border border-gray-200">
            <div id="question" class="text-lg font-medium text-center mb-4 text-black dark:text-black"></div>
            <div class="flex justify-center gap-4 mb-4">
              <button onclick="answer('vibe')" class="px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:opacity-90">Vibe</button>
              <button onclick="answer('text')" class="px-4 py-2 rounded-lg bg-green-600 text-white font-semibold hover:opacity-90">Text</button>
            </div>
            <div id="feedback" class="text-center text-sm mb-4"></div>
            <div class="flex justify-between items-center">
              <div id="score" class="font-semibold text-gray-700"></div>
              <button id="nextBtn" onclick="nextQuestion()" class="hidden px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:opacity-90">Next ‚Üí</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer id="resources" class="text-center mt-12">
      <h2 class="text-xl font-bold mb-4">üìö Resources</h2>
      <div class="flex justify-center space-x-4 text-blue-600 hover:text-blue-800">
        <a href="https://peo.gov.au/understand-our-parliament/how-parliament-works/the-australian-constitution/the-australian-constitution-video/" target="_blank">PEO Video Page</a>
        <span class="text-gray-400">|</span>
        <a href="https://www.facinghistory.org/resource-library/big-paper" target="_blank">"Big Paper" Strategy</a>
        <span class="text-gray-400">|</span>
        <a href="https://peo.gov.au/understand-our-parliament/how-parliament-works/the-australian-constitution/the-constitution" target="_blank">Full Text of the Constitution</a>
      </div>
      <p class="text-sm text-gray-500 mt-4">¬© <span id="year"></span> Civics Toolkit</p>
    </footer>
  </div>

  <script>
    (function(){
      const panels = Array.from(document.querySelectorAll('[data-writing-panel]'));
      if (!panels.length) return;

      const storagePrefix = 'civics-writing-panel-';
      let storageAvailable = true;
      let storage;

      try {
        storage = window.localStorage;
        const probeKey = storagePrefix + 'probe';
        storage.setItem(probeKey, 'ok');
        storage.removeItem(probeKey);
      } catch (error) {
        storageAvailable = false;
        storage = null;
      }

      const watchers = [];

      function setStatus(statusEl, message, state){
        if (!statusEl) return;
        statusEl.textContent = message;
        if (state) {
          statusEl.setAttribute('data-state', state);
        } else {
          statusEl.removeAttribute('data-state');
        }
      }

      function countWords(text){
        if (!text) return 0;
        const trimmed = text.trim();
        if (!trimmed) return 0;
        return trimmed.split(/\s+/).filter(Boolean).length;
      }

      function formatCount(count){
        return `${count} word${count === 1 ? '' : 's'}`;
      }

      function broadcastStorageDisabled(){
        if (!storageAvailable) return;
        storageAvailable = false;
        storage = null;
        watchers.forEach((item) => {
          if (typeof item.cancel === 'function') item.cancel();
          if (typeof item.clearPending === 'function') item.clearPending();
          item.panel.classList.add('writing-panel--no-storage');
          setStatus(item.statusEl, 'Autosave unavailable ‚Äî your writing stays only while this tab is open.', 'error');
        });
      }

      panels.forEach((panel, index) => {
        const textarea = panel.querySelector('[data-writing-input]');
        const statusEl = panel.querySelector('[data-writing-status]');
        const countEl = panel.querySelector('[data-writing-count]');
        const resetBtn = panel.querySelector('[data-writing-reset]');

        if (!textarea || !statusEl || !countEl) return;

        const storageKey = storagePrefix + (panel.getAttribute('data-storage-key') || textarea.id || index);
        let revertTimer = null;
        let pendingSave = null;

        const watcher = {
          panel,
          statusEl,
          cancel(){
            if (revertTimer){
              clearTimeout(revertTimer);
              revertTimer = null;
            }
          },
          clearPending(){
            if (pendingSave){
              clearTimeout(pendingSave);
              pendingSave = null;
            }
          }
        };

        watchers.push(watcher);

        function updateStatus(message, state, revertToReady = false){
          setStatus(statusEl, message, state);
          watcher.cancel();
          if (revertToReady && storageAvailable && storage){
            revertTimer = window.setTimeout(() => {
              setStatus(statusEl, 'Autosave ready.', 'muted');
              revertTimer = null;
            }, 2200);
          }
        }

        function updateCount(){
          const words = countWords(textarea.value);
          countEl.textContent = formatCount(words);
        }

        function persist(){
          if (!storageAvailable || !storage) return;
          try {
            if (textarea.value){
              storage.setItem(storageKey, textarea.value);
            } else {
              storage.removeItem(storageKey);
            }
            updateStatus('Saved just now.', 'success', true);
          } catch (error) {
            broadcastStorageDisabled();
          }
        }

        function scheduleSave(){
          updateCount();
          if (!storageAvailable || !storage){
            updateStatus('Autosave unavailable ‚Äî your writing stays only while this tab is open.', 'error');
            return;
          }
          updateStatus('Saving‚Ä¶', 'saving');
          watcher.clearPending();
          pendingSave = window.setTimeout(() => {
            pendingSave = null;
            persist();
          }, 400);
        }

        if (storageAvailable && storage){
          const stored = storage.getItem(storageKey);
          if (typeof stored === 'string'){
            textarea.value = stored;
            updateStatus('Restored from your last visit.', 'info', true);
          } else {
            updateStatus('Autosave ready.', 'muted');
          }
        } else {
          panel.classList.add('writing-panel--no-storage');
          updateStatus('Autosave unavailable ‚Äî your writing stays only while this tab is open.', 'error');
        }

        updateCount();

        textarea.addEventListener('input', scheduleSave);
        textarea.addEventListener('blur', () => {
          watcher.clearPending();
          persist();
        });

        if (resetBtn){
          resetBtn.addEventListener('click', () => {
            watcher.clearPending();
            textarea.value = '';
            if (storageAvailable && storage){
              try {
                storage.removeItem(storageKey);
              } catch (error) {
                broadcastStorageDisabled();
              }
            }
            updateCount();
            updateStatus('Cleared. Start fresh.', 'muted', true);
            textarea.focus();
          });
        }
      });
    })();

    // Constitution Game logic (Easy Mode + vocab help + read aloud)
    (function(){
      const easyQuestions = [
        { q: "The Constitution names the Prime Minister.", a: "vibe", exp: "No. The words ‚ÄòPrime Minister‚Äô are not in the Constitution." },
        { q: "The Constitution splits powers between the national government and the states.", a: "text", exp: "Yes. It lists what the national Parliament can make laws about." },
        { q: "The Constitution protects the environment.", a: "vibe", exp: "No. It doesn‚Äôt mention the environment or climate." },
        { q: "The Constitution creates the High Court.", a: "text", exp: "Yes. It sets up the High Court." },
        { q: "Australia has a big list of rights in the Constitution.", a: "vibe", exp: "No. There‚Äôs no general ‚ÄòBill of Rights‚Äô." },
        { q: "The Constitution lets Parliament make marriage laws.", a: "text", exp: "Yes. Marriage is one of the listed topics (powers)." },
        { q: "The job ‚ÄòPrime Minister‚Äô is a tradition, not written in the Constitution.", a: "text", exp: "Right. It‚Äôs a practice (a ‚Äòconvention‚Äô), not written in the words." }
      ];

      const standardQuestions = [
        { q: "The Prime Minister is mentioned in the Constitution.", a: "vibe", exp: "The Constitution does not mention the PM ‚Äî it mostly covers Parliament, the Crown and the courts." },
        { q: "The Constitution sets out rules for dividing power between the states and federal government.", a: "text", exp: "Yes ‚Äî division of powers is a core part of the document (for example, section 51 lists Commonwealth powers)." },
        { q: "Environmental protection is a key principle in the Constitution.", a: "vibe", exp: "No ‚Äî the 1901 text doesn‚Äôt include environment or climate references." },
        { q: "It establishes the High Court of Australia.", a: "text", exp: "Correct ‚Äî the Constitution creates the High Court and its role (Chapter III)." },
        { q: "It includes a Bill of Rights protecting free speech.", a: "vibe", exp: "No general Bill of Rights exists ‚Äî only a few limited rights are in the text." },
        { q: "The Constitution allows the Commonwealth to make marriage laws.", a: "text", exp: "Yes ‚Äî marriage is among the heads of power in section 51." }
      ];

      let current = 0, score = 0, useEasy = true;
      const gameEl = document.getElementById('game');
      const qEl = document.getElementById('question');
      const fEl = document.getElementById('feedback');
      const sEl = document.getElementById('score');
      const nextBtn = document.getElementById('nextBtn');

      // Build a small control bar (Easy Mode + Read Aloud + Vocab help)
      const controls = document.createElement('div');
      controls.className = 'flex flex-wrap items-center justify-between gap-3 mb-4';
      controls.innerHTML = `
        <label class="inline-flex items-center gap-2 text-sm">
          <input id="easyToggle" type="checkbox" class="h-4 w-4 accent-purple-600" checked>
          <span>Easy Mode</span>
        </label>
        <button id="speakBtn" class="px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-sm">üîä Read aloud</button>
        <details class="rounded-lg border border-gray-200 px-3 py-2 text-sm">
          <summary class="cursor-pointer font-semibold">Vocab help</summary>
          <ul class="mt-2 list-disc list-inside space-y-1 text-gray-700">
            <li><strong>Constitution:</strong> the country‚Äôs main rule book</li>
            <li><strong>Parliament:</strong> the people who make national laws</li>
            <li><strong>High Court:</strong> the top court in Australia</li>
            <li><strong>Bill of Rights:</strong> a big list of rights (Australia doesn‚Äôt have a general one in the Constitution)</li>
            <li><strong>Division of powers:</strong> who does what: national vs states</li>
          </ul>
        </details>`;
      gameEl.prepend(controls);

      const easyToggle = document.getElementById('easyToggle');
      const speakBtn = document.getElementById('speakBtn');

      // Friendlier button labels
      const btnVibe = Array.from(gameEl.querySelectorAll('button')).find(b => (b.getAttribute('onclick')||'').includes("answer('vibe'"));
      const btnText = Array.from(gameEl.querySelectorAll('button')).find(b => (b.getAttribute('onclick')||'').includes("answer('text'"));
      if (btnVibe) btnVibe.textContent = 'üí° Idea (Vibe)';
      if (btnText) btnText.textContent = 'üìú In the Constitution';

      function activeSet(){ return useEasy ? easyQuestions : standardQuestions; }

      function loadQuestion(){
        const arr = activeSet();
        const q = arr[current];
        qEl.textContent = q.q;
        fEl.textContent = '';
        nextBtn.classList.add('hidden');
        sEl.textContent = `Score: ${score}/${current}`;
      }

      window.answer = function(choice){
        const arr = activeSet();
        const q = arr[current];
        if (choice === q.a) {
          score++;
          fEl.innerHTML = `<span class="text-green-600 font-bold">‚úî Correct!</span> ${q.exp}`;
        } else {
          fEl.innerHTML = `<span class="text-red-600 font-bold">‚úò Incorrect.</span> ${q.exp}`;
        }
        nextBtn.classList.remove('hidden');
        sEl.textContent = `Score: ${score}/${current+1}`;
      }

      window.nextQuestion = function(){
        const arr = activeSet();
        current++;
        if (current < arr.length) {
          loadQuestion();
        } else {
          qEl.textContent = 'Game Over! üéâ';
          fEl.textContent = `Your final score is ${score}/${arr.length}.`;
          nextBtn.textContent = 'Play Again';
          nextBtn.onclick = restart;
        }
      }

      function restart(){
        current = 0; score = 0;
        nextBtn.textContent = 'Next ‚Üí';
        nextBtn.onclick = window.nextQuestion;
        loadQuestion();
      }

      easyToggle.addEventListener('change', () => { useEasy = easyToggle.checked; restart(); });

      function speak(text){
        try {
          if (!('speechSynthesis' in window)) return;
          window.speechSynthesis.cancel();
          const u = new SpeechSynthesisUtterance(text);
          u.lang = 'en-AU';
          window.speechSynthesis.speak(u);
        } catch(e) { /* no-op if not supported */ }
      }
      speakBtn.addEventListener('click', () => { speak(qEl.textContent + '. ' + fEl.textContent); });

      loadQuestion();
    })();

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
